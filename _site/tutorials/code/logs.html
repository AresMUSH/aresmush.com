<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="twitter:card" content="summary">

<!-- Schema.org markup for Google+ -->
<!-- Twitter Card data -->
<!-- Open Graph data -->

    <meta name="google-site-verification" content="GK5cKdKe-CQEFsGx1pPxHFhflO88ddWG8NdWk_KDabA" />
    
    <title>Using Log Files - </title>
    <meta property="og:title" content="Using Log Files - ">
    <meta name="twitter:title" content="Using Log Files - ">
    <meta itemprop="name" content="Using Log Files - ">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="">
    <meta property="og:site_name" content="Using Log Files" >
    <meta property="og:url" content="/tutorials/code/logs.html" >
    
  
    <meta name="description" content=" ...">
    <meta property="og:description" content=" ..." >
    <meta name="twitter:description" content=" ...">  
    <meta itemprop="description" content=" ...">
  
    
  
    <meta property="og:image" content="/default_preview.png">
    <meta name="twitter:image" content="/default_preview.png">
    <meta itemprop="image" content="/default_preview.png">
  
  
  <meta name="twitter:site" content="@lynnnoton">
  <meta name="twitter:creator" content="@lynnnoton">

  
    <!-- 
    
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    
    -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://use.fontawesome.com/ee2438614b.js"></script>
       
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css" defer="defer"></script>


    <script>
        (function() {
          var cx = '006109472892303620439:hmwpm8s4lvi';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
    </script>
      
    <script src="/scripts/default.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css">
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css">


    <link rel="stylesheet" type="text/css" href="/css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/tables.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/prettify.css"></link>
    
    
      <link rel="shortcut icon" href="/images/favicon.ico">
      <link rel="apple-touch-icon" href="/images/touchicon_57.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/images/touchicon_62.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/images/touchicon_114.png">
      
      
  </head>

  <body>

      <a name="top"></a>     
         
         
                               
                      <div class="titlebox">
                                                    
                         <div class="blogtitle">
                          
                              <a href="">AresMUSH</a> 
                              
                          </div>
                          
                          <div class="tagline">
                                A New Breed of MUSH Server            
                            </div>
                            
                            </div>
                             
                      
                            <nav class="navbar navbar-dark">
 
    <ul class="nav navbar-nav">
      <li class="active">
        <a href="/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Features <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/features/">Why Ares?</a></li>
          <li><a href="/features/ares-for-players.html">Ares for Players</a></li>
          <li><a href="/features/ares-for-admins.html">Ares for Admins</a></li>
          <li><a href="/features/ares-for-coders.html">Ares for Coders</a></li>
          <li><hr/></li>
          <li><a href="/web-portal">The Web Portal</a></li>
          <li><a href="/features/skills.html">Skills Systems</a></li>
          <li><a href="/handles">Player Handles</a></li>
          <li><a href="/features/server-roundup.html">Server Comparison</a></li>
        </ul>
      </li>  
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/mush-101">MUSH 101</a></li>
          <li><a href="/tutorials/play">Playing Ares</a></li>
          <li><a href="/tutorials/install">Installing Ares</a></li>
          <li><a href="/tutorials/config">Configuring Ares</a></li>
          <li><a href="/tutorials/manage">Managing Ares</a></li>
          <li><a href="/tutorials/code">Coding for Ares</a></li>
        </ul>
      </li>    
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">FS3 <span class="caret"></span></a>

        <ul class="dropdown-menu">
          <li><a href="/fs3/">FS3 Home</a></li>
          <li><a href="/fs3/fs3-3/">Player's Guide</a></li>
          <li><a href="/fs3/fs3-3/roll-quickref.html">Skills Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-quickref.html">Combat Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-walkthrough.html">Interactive Combat Walkthrough</a></li>
          <li><a href="/fs3/old-editions.html">Prior Edition Guides</a></li>
        </ul>
      </li>
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Code <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/code/">Source Code</a></li>
          <li><a href="/tutorials/code">Learn to Code</a></li>
          <li><a href="https://github.com/AresMUSH/aresmush/releases">Release Notes <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>
      
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
        
        <ul class="dropdown-menu">
          <li><a href="http://arescentral.aresmush.com">AresCentral Directory <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://forum.aresmush.com">Discussion Forum <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://logcleaner.aresmush.com/">RP Log Cleaner <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>

      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/feedback.html">Contact Us</a>
          <li><a href="/license.html">License</a>
          <li><a href="/privacy.html">Privacy Policy</a>
        </ul>
      </li>

    </ul>
</nav>

                      
                        
         
         <div class="page-block">
         
                           <div class="row">
                         
                         
    <div class="col col-sm-9">   

<h1>Using Log Files</h1>

    <div class="tags-box">
                 <ul class="tags-box">
                 
                 <li>[logs]</li>
                 
                 <li>[troubleshooting]</li>
                 
                 </ul>
    </div>
                               
             <div class="page">
                 <p>Ares has an internal logging system (log4r) to help diagnose code issues.  The log includes error messages, important game events, and every command executed on the game <em>except</em> those omitted for player privacy (pages, poses, channel chat, and passwords).</p>

<div id="inline_toc">
  <p><strong>Table of Contents</strong></p>

<ul id="markdown-toc">
  <li><a href="#logging-in-code" id="markdown-toc-logging-in-code">Logging in Code</a></li>
  <li><a href="#log-files" id="markdown-toc-log-files">Log Files</a></li>
  <li><a href="#reading-log-files" id="markdown-toc-reading-log-files">Reading Log Files</a></li>
  <li><a href="#log-levels" id="markdown-toc-log-levels">Log Levels</a></li>
  <li><a href="#debugging-with-stack-traces" id="markdown-toc-debugging-with-stack-traces">Debugging With Stack Traces</a></li>
  <li><a href="#changing-the-log-level" id="markdown-toc-changing-the-log-level">Changing the Log Level</a></li>
</ul>

</div>

<h2 id="logging-in-code">Logging in Code</h2>

<p>Throughout the code, you’ll see statements like:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Global</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">debug</span> <span class="s2">"Loading config from </span><span class="si">#{</span><span class="n">file</span><span class="si">}</span><span class="s2">."</span>
</code></pre></div></div>

<p>This writes a statement to the log file.  You can use string interpolation (e.g. <code class="language-ruby highlighter-rouge"><span class="c1">#{file}</span></code> to pass variables into the log statements.)</p>

<h2 id="log-files">Log Files</h2>

<p>Ares by default will maintain up to ten log files, switching when each one gets too big.  The log files are numbered sequentially (log1.txt, log2.txt, etc.)   Log files are stored on the server in the <code class="language-ruby highlighter-rouge"><span class="n">aresmush</span><span class="o">/</span><span class="n">game</span><span class="o">/</span><span class="n">logs</span></code> folder.</p>

<h2 id="reading-log-files">Reading Log Files</h2>

<p>The easiest way to browse log files is from the Web Portal.  Go to Admin -&gt; Logs.  The newest log file will be at the top of the list.  Log entries are timestamped.  The Web Portal will show log entries in reverse chronological order, so the newest ones are listed first.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">20</span> <span class="mi">13</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">44</span> <span class="no">DEBUG</span> <span class="o">-</span> <span class="no">AresMUSH</span><span class="o">::</span><span class="no">Who</span><span class="o">::</span><span class="no">WhereCmd</span><span class="p">:</span> <span class="no">ID</span><span class="o">=</span><span class="mi">229</span> <span class="no">Enactor</span><span class="o">=</span><span class="no">Faraday</span> <span class="no">Cmd</span><span class="o">=+</span><span class="n">where</span> 
<span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">20</span> <span class="mi">13</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">25</span> <span class="no">DEBUG</span> <span class="o">-</span> <span class="no">Emptying</span> <span class="n">trash</span> <span class="k">for</span> <span class="no">John</span><span class="o">.</span> 
<span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">20</span> <span class="mi">13</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">25</span> <span class="no">INFO</span> <span class="o">-</span> <span class="no">Character</span> <span class="no">Disconnected</span><span class="p">:</span> <span class="no">John</span> 
</code></pre></div></div>

<h2 id="log-levels">Log Levels</h2>

<p>There are four different levels of logging statements:</p>

<ul>
  <li><strong>Error</strong> - Unexpected code errors.  <code class="language-ruby highlighter-rouge"><span class="no">Global</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="s2">"Something bad happened."</span><span class="p">)</span></code></li>
  <li><strong>Warning</strong> - Unusual issues that did not cause a big problem, but might indicate an unexpected condition.  <code class="language-ruby highlighter-rouge"><span class="no">Global</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">warn</span><span class="p">(</span><span class="s2">"Attempted to post to a forum that doesn't exist."</span><span class="p">)</span></code></li>
  <li><strong>Info</strong> - Important informational messages that help you keep track of what’s happening in the game. <code class="language-ruby highlighter-rouge"><span class="no">Global</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="s2">"Client connected from </span><span class="si">#{</span><span class="n">ip_address</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span></code></li>
  <li><strong>Debug</strong> - Nitty-gritty details that are helpful for troubleshooting but not necessariy of general interest.  <code class="language-ruby highlighter-rouge"><span class="no">Global</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">debug</span> <span class="s2">"Reading help file </span><span class="si">#{</span><span class="n">topic_key</span><span class="si">}</span><span class="s2">"</span></code></li>
</ul>

<h2 id="debugging-with-stack-traces">Debugging With Stack Traces</h2>

<p>Errors include a backtrace, which helps you identify the line of code where the error occurred, as well as the function calls preceding it.  For example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2018</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">20</span> <span class="mo">04</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">39</span> <span class="no">ERROR</span> <span class="o">-</span> <span class="no">Error</span> <span class="k">in</span> <span class="no">Web</span> <span class="no">Request</span><span class="p">:</span> <span class="n">client</span><span class="o">=</span> <span class="n">error</span><span class="o">=</span><span class="kp">private</span> <span class="nb">method</span> <span class="sb">`select' called for nil:NilClass backtrace=[
"/home/ares/aresmush/plugins/arescentral/web/get_players_handler.rb:13:in `</span><span class="n">block</span> <span class="k">in</span> <span class="n">handle</span><span class="s1">'", 
"/home/ares/.rvm/gems/ruby-2.4.1/gems/ohm-3.0.3/lib/ohm.rb:123:in `block (2 levels) in each'</span><span class="s2">", 
"</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ares</span><span class="o">/</span><span class="n">aresmush</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">arescentral</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">get_players_handler</span><span class="p">.</span><span class="nf">rb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`handle'", 
"/home/ares/aresmush/engine/aresmush/commands/dispatcher.rb:125:in `</span><span class="n">block</span> <span class="p">(</span><span class="mi">2</span> <span class="n">levels</span><span class="p">)</span> <span class="k">in</span> <span class="n">on_web_request</span><span class="s1">'", 
"/home/ares/aresmush/engine/aresmush/commands/dispatcher.rb:119:in `each'</span><span class="s2">"]
</span></code></pre></div></div>

<p>The root problem is that we tried to call <code class="language-ruby highlighter-rouge"><span class="nb">select</span></code> on a nil class.  This happened on <code class="language-ruby highlighter-rouge"><span class="n">plugins</span><span class="o">/</span><span class="n">arescentral</span><span class="o">/</span><span class="n">web</span><span class="o">/</span><span class="n">get_players_handler</span><span class="p">.</span><span class="nf">rb</span></code> line 13.  We see some of the events leading up to it, starting with the dispatcher’s <code class="language-ruby highlighter-rouge"><span class="n">on_web_request</span></code> and then going into the <code class="language-ruby highlighter-rouge"><span class="n">handle</span></code> method of the ‘get players’ handler.</p>

<h2 id="changing-the-log-level">Changing the Log Level</h2>

<p>By default, the Ares log file will include all four levels of log messages.  If your game is stable and you find the logs too spammy, you can change the minimum log level from DEBUG to INFO (or even to WARN or ERROR though that’s not advisable).</p>

<p>Edit <code class="language-ruby highlighter-rouge"><span class="n">logger</span><span class="p">.</span><span class="nf">yml</span></code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="ss">loggers:
    </span><span class="o">-</span> <span class="nb">name</span>      <span class="p">:</span> <span class="n">ares</span>
      <span class="n">level</span>     <span class="p">:</span> <span class="no">DEBUG</span>
</code></pre></div></div>

             </div>             
                           </div>
              
                           <div class="col col-sm-3">
                                                 <div class="sidebar">   
                 
<div id="search-box">
  <!-- SearchBox widget will appear here -->
</div>
                  
<div class="sidebar-title">See AresMUSH In Action</div>

<p>Visit the Ares <a href="http://mush.aresmush.com">Demo Game</a>.</p>

<p>Find other Ares games at <a href="http://arescentral.aresmush.com">AresCentral</a>.</p>


<div class="sidebar-title">Follow Us on Facebook</div>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=1423276681271936";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-page" data-href="https://www.facebook.com/aresmush/" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="false"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/aresmush/"><a href="https://www.facebook.com/aresmush/">Ares Mush</a></blockquote></div></div>

<div class="sidebar-title">Discuss Ares</div>

Have a question?  Want to talk about AresMUSH (or MU*s in general)?  Visit our <a href="http://forum.aresmush.com">Discussion Forum</a>.
                  
                  

                  <div class="sidebar-title">Stay Up to Date</div>
                          
                          Get important updates about Ares on <a href="https://www.facebook.com/aresmush/">Facebook</a> or the <a href="http://forum.aresmush.com">Discussion Forum</a>.

              <div id="searchModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Search Results</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
       

       <div id="search-hits">
         <!-- Hits widget will appear here -->
       </div>


       <div id="search-pagination">
         <!-- Pagination widget will appear here -->
       </div>
       
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<script src="/scripts/search.js"></script>
<script>
  initializeSearch( 'NI38C577BA',
    '29793fd9084a3446072c14e471e32589',
    'aresmush.com',
    ' ' );
</script>

                  

                  
                
                  
                           </div>
</div>
                          
              </div>
              
          </div>
          

          <div class="footer">
             <p> &copy;  2013 with help from the <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a> blog engine.
              </p>
          </div>
          
      
     
  </body>
</html>
