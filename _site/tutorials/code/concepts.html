<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="twitter:card" content="summary">

<!-- Schema.org markup for Google+ -->
<!-- Twitter Card data -->
<!-- Open Graph data -->

    <meta name="google-site-verification" content="GK5cKdKe-CQEFsGx1pPxHFhflO88ddWG8NdWk_KDabA" />
    
    <title>Ares Concepts - </title>
    <meta property="og:title" content="Ares Concepts - ">
    <meta name="twitter:title" content="Ares Concepts - ">
    <meta itemprop="name" content="Ares Concepts - ">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="">
    <meta property="og:site_name" content="Ares Concepts" >
    <meta property="og:url" content="/tutorials/code/concepts.html" >
    
  
    <meta name="description" content=" ...">
    <meta property="og:description" content=" ..." >
    <meta name="twitter:description" content=" ...">  
    <meta itemprop="description" content=" ...">
  
    
  
    <meta property="og:image" content="/default_preview.png">
    <meta name="twitter:image" content="/default_preview.png">
    <meta itemprop="image" content="/default_preview.png">
  
  
  <meta name="twitter:site" content="@lynnnoton">
  <meta name="twitter:creator" content="@lynnnoton">

  
    <!-- 
    
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    
    -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://use.fontawesome.com/ee2438614b.js"></script>
       
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css" defer="defer"></script>


    <script>
        (function() {
          var cx = '006109472892303620439:hmwpm8s4lvi';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
    </script>
      
    <script src="/scripts/default.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css">
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css">


    <link rel="stylesheet" type="text/css" href="/css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/tables.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/prettify.css"></link>
    
    
      <link rel="shortcut icon" href="/images/favicon.ico">
      <link rel="apple-touch-icon" href="/images/touchicon_57.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/images/touchicon_62.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/images/touchicon_114.png">
      
      
  </head>

  <body>

      <a name="top"></a>     
         
         
                               
                      <div class="titlebox">
                                                    
                         <div class="blogtitle">
                          
                              <a href="">AresMUSH</a> 
                              
                          </div>
                          
                          <div class="tagline">
                                A New Breed of MUSH Server            
                            </div>
                            
                            </div>
                             
                      
                            <nav class="navbar navbar-dark">
 
    <ul class="nav navbar-nav">
      <li class="active">
        <a href="/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Features <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/features/">Why Ares?</a></li>
          <li><a href="/features/ares-for-players.html">Ares for Players</a></li>
          <li><a href="/features/ares-for-admins.html">Ares for Admins</a></li>
          <li><a href="/features/ares-for-coders.html">Ares for Coders</a></li>
          <li><hr/></li>
          <li><a href="/web-portal">The Web Portal</a></li>
          <li><a href="/features/skills.html">Skills Systems</a></li>
          <li><a href="/handles">Player Handles</a></li>
          <li><a href="/features/server-roundup.html">Server Comparison</a></li>
        </ul>
      </li>  
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/mush-101">MUSH 101</a></li>
          <li><a href="/tutorials/play">Playing Ares</a></li>
          <li><a href="/tutorials/install">Installing Ares</a></li>
          <li><a href="/tutorials/config">Configuring Ares</a></li>
          <li><a href="/tutorials/manage">Managing Ares</a></li>
          <li><a href="/tutorials/code">Coding for Ares</a></li>
        </ul>
      </li>    
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">FS3 <span class="caret"></span></a>

        <ul class="dropdown-menu">
          <li><a href="/fs3/">FS3 Home</a></li>
          <li><a href="/fs3/fs3-3/">Player's Guide</a></li>
          <li><a href="/fs3/fs3-3/roll-quickref.html">Skills Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-quickref.html">Combat Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-walkthrough.html">Interactive Combat Walkthrough</a></li>
          <li><a href="/fs3/old-editions.html">Prior Edition Guides</a></li>
        </ul>
      </li>
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Code <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/code/">Source Code</a></li>
          <li><a href="/tutorials/code">Learn to Code</a></li>
          <li><a href="https://github.com/AresMUSH/aresmush/releases">Release Notes <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>
      
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
        
        <ul class="dropdown-menu">
          <li><a href="http://arescentral.aresmush.com">AresCentral Directory <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://forum.aresmush.com">Discussion Forum <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://logcleaner.aresmush.com/">RP Log Cleaner <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>

      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/feedback.html">Contact Us</a>
          <li><a href="/license.html">License</a>
          <li><a href="/privacy.html">Privacy Policy</a>
        </ul>
      </li>

    </ul>
</nav>

                      
                        
         
         <div class="page-block">
         
                           <div class="row">
                         
                         
    <div class="col col-sm-9">   

<h1>Ares Concepts</h1>

    <div class="tags-box">
                 <ul class="tags-box">
                 
                 <li>[code]</li>
                 
                 </ul>
    </div>
                               
             <div class="page">
                 <p>This article describes some core concepts in Ares code.   It assumes you’ve already read about the <a href="/tutorials/code/architecture.html">Ares Architecture</a>.</p>

<div id="inline_toc">
  <p><strong>Table of Contents</strong></p>

<ul id="markdown-toc">
  <li><a href="#clients" id="markdown-toc-clients">Clients</a></li>
  <li><a href="#characters" id="markdown-toc-characters">Characters</a></li>
  <li><a href="#basic-models" id="markdown-toc-basic-models">Basic Models</a></li>
  <li><a href="#commands" id="markdown-toc-commands">Commands</a></li>
  <li><a href="#events" id="markdown-toc-events">Events</a></li>
  <li><a href="#web-requests" id="markdown-toc-web-requests">Web Requests</a></li>
</ul>

</div>

<h2 id="clients">Clients</h2>

<p>When someone connects to the game with their MU client, Ares calls that connection a <strong>Client</strong>.  The Client class provides information about the connection, like the IP address and idle time.  It handles input from the MU client and turns it into a Command (explained below).</p>

<blockquote>
  <p><i class="fa fa-exclamation-triangle"></i> <strong>Note:</strong> Clients represent connections from actual MUSH clients and the Ares Web Portal’s “Play” screen (which acts like a MUSH client).  Other Web Portal connections are handled differently, as explained below.</p>
</blockquote>

<p>The Client class also provides utilities to easily send messages (<strong>emit</strong>) to the MU client.  Throughout the Ares code, you’ll see things like:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="p">.</span><span class="nf">emit_success</span> <span class="n">message</span>
</code></pre></div></div>

<p>The Client class provides five methods for sending output to the MU client:</p>

<ul>
  <li><code class="language-ruby highlighter-rouge"><span class="n">emit</span></code> - A basic emit.</li>
  <li><code class="language-ruby highlighter-rouge"><span class="n">emit_ooc</span></code> - OOC messages show up in light blue.</li>
  <li><code class="language-ruby highlighter-rouge"><span class="n">emit_success</span></code> - Success notices show up in green.</li>
  <li><code class="language-ruby highlighter-rouge"><span class="n">emit_failure</span></code> - Failure/error alerts show up in red.</li>
  <li><code class="language-ruby highlighter-rouge"><span class="n">emit_raw</span></code> - A special emit that will not evaluate linebreaks or ansi codes.</li>
</ul>

<blockquote>
  <p><i class="fa fa-info-circle"></i> <strong>Tip:</strong> It’s highly recommended that you use the standard emit_ooc / emit_success / emit_failure methods in any custom code you write.  This provides a consistent look-and-feel for all game commands and enable log editors to easily filter out these messages.</p>
</blockquote>

<h2 id="characters">Characters</h2>

<p>Once a player has logged in with their character name and password, their client now has a <strong>Character</strong> attached.  You can access that by calling <code class="language-ruby highlighter-rouge"><span class="n">client</span><span class="p">.</span><span class="nf">char</span></code> from a Client object.</p>

<blockquote>
  <p><i class="fa fa-info-circle"></i> <strong>Tip:</strong> Remember that it’s possible for a Client to <em>not</em> have a Character object if the player is just sitting on the login screen.</p>
</blockquote>

<p>You can use the character object to access all sorts of information about the character.  For example, you can emit a personal greeting:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="p">.</span><span class="nf">emit</span> <span class="s2">"Hello </span><span class="si">#{</span><span class="n">client</span><span class="p">.</span><span class="nf">char</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">!"</span>
</code></pre></div></div>

<h2 id="basic-models">Basic Models</h2>

<p>The Ares Engine provides several other basic database models.</p>

<ul>
  <li><strong>Character</strong> - A character, as explained above.</li>
  <li><strong>Room</strong> - A MUSH location - like a chatroom for roleplay to take place.  All characters are in a room at all times.</li>
  <li><strong>Exit</strong> - Links rooms together, allowing characters to get from one to another.</li>
  <li><strong>Role</strong> - Defines a role available in the <a href="/tutorials/manage/roles.html">roles and permissions</a> system.</li>
  <li><strong>Game</strong> - Stores general information about the game as a whole, like who the master admin character is.</li>
  <li><strong>Handle</strong> - Stores a link between a character and an AresCentral player handle, as part of the <a href="/handles">handles</a> system.</li>
</ul>

<h2 id="commands">Commands</h2>

<p>When a client sends some text to the game, it is converted into a <strong>Command</strong> object.  The Command object breaks the text into its familiar MUSH components:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">prefix</span><span class="p">)</span><span class="n">root</span><span class="o">/</span><span class="n">switch</span> <span class="n">args</span>
</code></pre></div></div>

<p>For example:  <code class="language-ruby highlighter-rouge"><span class="o">+</span><span class="n">actor</span><span class="o">/</span><span class="n">set</span> <span class="no">Faraday</span><span class="o">=</span><span class="no">Helen</span> <span class="no">Mirren</span></code> would be broken up as:</p>

<table>
  <thead>
    <tr>
      <th>prefix</th>
      <th>root</th>
      <th>switch</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>+</td>
      <td>actor</td>
      <td>set</td>
      <td>Faraday=Helen Mirren</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><i class="fa fa-info-circle"></i> <strong>Tip:</strong> Ares ignores the prefix except for a few rare circumstances.  So +who, who, @who and /who all end up being handled as simply ‘who’.</p>
</blockquote>

<p>Commands are routed through a central <strong>Dispatcher</strong>, which will go through the plugins trying to find one that wants the command.  The dispatcher uses the <a href="https://github.com/eventmachine/eventmachine">EventMachine</a> reactor library, which ensures that commands are handled one by one in an orderly queue.</p>

<h2 id="events">Events</h2>

<p>In addition to commands, the game code can issue <strong>Events</strong> to notify plugins when noteworthy events have happened. Some common events include:</p>

<ul>
  <li>CharConnected</li>
  <li>CharDisconnected</li>
  <li>CharCreated</li>
  <li>Cron (a periodic timer)</li>
</ul>

<p>Events are also routed through the central Dispatcher.  Unlike a command, which can only be handled by a single plugin, Events may be handled by multiple plugins.  For example, when a character logs in you want to notify people in his room (Rooms plugin), notify the channels he’s on (Channels plugin), notify him of new mail or forum posts (Login plugin), and so on.</p>

<h2 id="web-requests">Web Requests</h2>

<p>When a player does something on the Web Portal, it doesn’t come through as a Command, but as a <strong>Web Request</strong>.  They’re similar in structure to Commands and also go through the Dispatcher; they’re just handled a little differently.</p>

             </div>             
                           </div>
              
                           <div class="col col-sm-3">
                                                 <div class="sidebar">   
                 
<div id="search-box">
  <!-- SearchBox widget will appear here -->
</div>
                  
<div class="sidebar-title">See AresMUSH In Action</div>

<p>Visit the Ares <a href="http://mush.aresmush.com">Demo Game</a>.</p>

<p>Find other Ares games at <a href="http://arescentral.aresmush.com">AresCentral</a>.</p>


<div class="sidebar-title">Follow Us on Facebook</div>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=1423276681271936";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-page" data-href="https://www.facebook.com/aresmush/" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="false"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/aresmush/"><a href="https://www.facebook.com/aresmush/">Ares Mush</a></blockquote></div></div>

<div class="sidebar-title">Discuss Ares</div>

Have a question?  Want to talk about AresMUSH (or MU*s in general)?  Visit our <a href="http://forum.aresmush.com">Discussion Forum</a>.
                  
                  

                  <div class="sidebar-title">Stay Up to Date</div>
                          
                          Get important updates about Ares on <a href="https://www.facebook.com/aresmush/">Facebook</a> or the <a href="http://forum.aresmush.com">Discussion Forum</a>.

              <div id="searchModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Search Results</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
       

       <div id="search-hits">
         <!-- Hits widget will appear here -->
       </div>


       <div id="search-pagination">
         <!-- Pagination widget will appear here -->
       </div>
       
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<script src="/scripts/search.js"></script>
<script>
  initializeSearch( 'NI38C577BA',
    '29793fd9084a3446072c14e471e32589',
    'aresmush.com',
    ' ' );
</script>

                  

                  
                
                  
                           </div>
</div>
                          
              </div>
              
          </div>
          

          <div class="footer">
             <p> &copy;  2013 with help from the <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a> blog engine.
              </p>
          </div>
          
      
     
  </body>
</html>
