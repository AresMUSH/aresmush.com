<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="twitter:card" content="summary">

<!-- Schema.org markup for Google+ -->
<!-- Twitter Card data -->
<!-- Open Graph data -->

    <meta name="google-site-verification" content="GK5cKdKe-CQEFsGx1pPxHFhflO88ddWG8NdWk_KDabA" />
    
    <title>App Review Command - </title>
    <meta property="og:title" content="App Review Command - ">
    <meta name="twitter:title" content="App Review Command - ">
    <meta itemprop="name" content="App Review Command - ">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="">
    <meta property="og:site_name" content="App Review Command" >
    <meta property="og:url" content="/tutorials/code/create-plugin/app-review-cmd.html" >
    
  
    <meta name="description" content=" ...">
    <meta property="og:description" content=" ..." >
    <meta name="twitter:description" content=" ...">  
    <meta itemprop="description" content=" ...">
  
    
  
    <meta property="og:image" content="/default_preview.png">
    <meta name="twitter:image" content="/default_preview.png">
    <meta itemprop="image" content="/default_preview.png">
  
  
  <meta name="twitter:site" content="@lynnnoton">
  <meta name="twitter:creator" content="@lynnnoton">

  
    <!-- 
    
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    
    -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://use.fontawesome.com/ee2438614b.js"></script>
       
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css" defer="defer"></script>


    <script>
        (function() {
          var cx = '006109472892303620439:hmwpm8s4lvi';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
    </script>
      
    <script src="/scripts/default.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css">
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css">


    <link rel="stylesheet" type="text/css" href="/css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/tables.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/prettify.css"></link>
    
    
      <link rel="shortcut icon" href="/images/favicon.ico">
      <link rel="apple-touch-icon" href="/images/touchicon_57.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/images/touchicon_62.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/images/touchicon_114.png">
      
      
  </head>

  <body>

      <a name="top"></a>     
         
         
                               
                      <div class="titlebox">
                                                    
                         <div class="blogtitle">
                          
                              <a href="">AresMUSH</a> 
                              
                          </div>
                          
                          <div class="tagline">
                                A New Breed of MUSH Server            
                            </div>
                            
                            </div>
                             
                      
                            <nav class="navbar navbar-dark">
 
    <ul class="nav navbar-nav">
      <li class="active">
        <a href="/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Features <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/features/">Why Ares?</a></li>
          <li><a href="/features/ares-for-players.html">Ares for Players</a></li>
          <li><a href="/features/ares-for-admins.html">Ares for Admins</a></li>
          <li><a href="/features/ares-for-coders.html">Ares for Coders</a></li>
          <li><hr/></li>
          <li><a href="/web-portal">The Web Portal</a></li>
          <li><a href="/features/skills.html">Skills Systems</a></li>
          <li><a href="/handles">Player Handles</a></li>
          <li><a href="/features/server-roundup.html">Server Comparison</a></li>
        </ul>
      </li>  
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/mush-101">MUSH 101</a></li>
          <li><a href="/tutorials/play">Playing Ares</a></li>
          <li><a href="/tutorials/install">Installing Ares</a></li>
          <li><a href="/tutorials/config">Configuring Ares</a></li>
          <li><a href="/tutorials/manage">Managing Ares</a></li>
          <li><a href="/tutorials/code">Coding for Ares</a></li>
        </ul>
      </li>    
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">FS3 <span class="caret"></span></a>

        <ul class="dropdown-menu">
          <li><a href="/fs3/">FS3 Home</a></li>
          <li><a href="/fs3/fs3-3/">Player's Guide</a></li>
          <li><a href="/fs3/fs3-3/roll-quickref.html">Skills Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-quickref.html">Combat Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-walkthrough.html">Interactive Combat Walkthrough</a></li>
          <li><a href="/fs3/old-editions.html">Prior Edition Guides</a></li>
        </ul>
      </li>
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Code <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/code/">Source Code</a></li>
          <li><a href="/tutorials/code">Learn to Code</a></li>
          <li><a href="https://github.com/AresMUSH/aresmush/releases">Release Notes <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>
      
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
        
        <ul class="dropdown-menu">
          <li><a href="http://arescentral.aresmush.com">AresCentral Directory <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://forum.aresmush.com">Discussion Forum <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://logcleaner.aresmush.com/">RP Log Cleaner <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>

      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/feedback.html">Contact Us</a>
          <li><a href="/license.html">License</a>
          <li><a href="/privacy.html">Privacy Policy</a>
        </ul>
      </li>

    </ul>
</nav>

                      
                        
         
         <div class="page-block">
         
                           <div class="row">
                         
                         
    <div class="col col-sm-9">   

                               
             <div class="page">
                 
                 <h1>App Review Command</h1>
                 
                 <div class="fs3-shortcut">
                     <a href="#toc">(View Table of Contents)</a>
                 </div>
                 

                     <p>The <code class="language-ruby highlighter-rouge"><span class="n">app</span></code> method provided by the Chargen plugin is meant to be generic.  It provides hooks so you can add whatever processing is needed to alert the user to problems with their character application: Points overspent, missing required skills, etc.</p>

<div class="alert alert-success">
<p><i class="fa fa-info-circle"></i> <b>Tip</b></p>
<p>AresMUSH' Chargen plugin is designed around the idea that it's better to let people set things they way they want in peace and then checking everything when they're done.  This prevents information overload by spamming them with warnings while things are still only half-set.</p>
</div>

<p>In the chargen app template (<code class="language-ruby highlighter-rouge"><span class="n">aresmush</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">chargen</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">app</span><span class="p">.</span><span class="nf">erb</span></code>) you’ll see a section:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">% if </span><span class="no">AresMUSH</span><span class="o">::</span><span class="no">FS3Skills</span><span class="p">.</span><span class="nf">is_enabled?</span> <span class="sx">%&gt;
&lt;%= section_title(t('chargen.abilities_review_title')) %&gt;</span>
<span class="o">&lt;</span><span class="sx">%= abilities %&gt;      
&lt;% end %&gt;
</span></code></pre></div></div>

<p>This is for the built-in FS3 plugin, and will not appear if FS3 is disabled.  You’ll want to add your own similar section right after that:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">%= section_title(t('cortex.cortex_review_title')) %&gt;
&lt;%=</span> <span class="n">cortex_abilities</span> <span class="sx">%&gt;      
&lt;% end %&gt;</span>
</code></pre></div></div>

<p>Then inside the app template renderer (<code class="language-ruby highlighter-rouge"><span class="n">aresmush</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">chargen</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">app_template</span><span class="p">.</span><span class="nf">rb</span></code>), add the <code class="language-ruby highlighter-rouge"><span class="n">cortex_abilities</span></code> method needed by the ERB file.  This calls out to the Cortex app review method:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">def</span> <span class="nf">cortex_abilities</span>
    <span class="no">Cortex</span><span class="p">.</span><span class="nf">app_review</span><span class="p">(</span><span class="vi">@char</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>

<p>Finally we need to define the app review method itself.  This has a number of pieces.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">app_review</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
  <span class="n">text</span> <span class="o">=</span> <span class="no">Cortex</span><span class="p">.</span><span class="nf">attribute_point_review</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
  <span class="n">text</span> <span class="o">&lt;&lt;</span> <span class="s2">"%r"</span>
  <span class="n">text</span> <span class="o">&lt;&lt;</span> <span class="no">Cortex</span><span class="p">.</span><span class="nf">skill_point_review</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
  <span class="n">text</span> <span class="o">&lt;&lt;</span> <span class="s2">"%r"</span>
  <span class="o">...</span>
  <span class="n">text</span>
<span class="k">end</span>
</code></pre></div></div>

<p>One of those pieces is checking the total number of attributes spent.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">attribute_rating_review</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
   <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
   <span class="n">char</span><span class="p">.</span><span class="nf">cortex_attributes</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">a</span><span class="o">|</span>
      <span class="n">total</span> <span class="o">+=</span> <span class="no">Cortex</span><span class="p">.</span><span class="nf">points_for_attribute</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="nf">die_step</span><span class="p">)</span>
   <span class="k">end</span>
   <span class="n">max</span> <span class="o">=</span> <span class="no">Global</span><span class="p">.</span><span class="nf">read_config</span><span class="p">(</span><span class="s2">"cortex"</span><span class="p">,</span> <span class="s2">"starting_attribute_points"</span><span class="p">)</span>
   <span class="n">message</span> <span class="o">=</span> <span class="n">t</span><span class="p">(</span><span class="s1">'cortex.total_attribute_points_check'</span><span class="p">,</span> <span class="ss">:total</span> <span class="o">=&gt;</span> <span class="n">total</span><span class="p">,</span> <span class="ss">:max</span> <span class="o">=&gt;</span> <span class="n">max</span><span class="p">)</span>
   <span class="n">status</span> <span class="o">=</span> <span class="n">total</span> <span class="o">&lt;=</span> <span class="n">max</span> <span class="p">?</span> <span class="n">t</span><span class="p">(</span><span class="s1">'chargen.ok'</span><span class="p">)</span> <span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s1">'chargen.too_many'</span><span class="p">)</span>
   <span class="no">Chargen</span><span class="p">.</span><span class="nf">format_review_status</span> <span class="n">message</span><span class="p">,</span> <span class="n">status</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Here we’ve calculated the total number of attribute points spent (using a helper method to convert a die_step like ‘d6’ to a cost in attribute points) and then compared it to our configured ‘starting_attribute_points’ value.</p>

<p>We use the Chargen helper method <code class="language-ruby highlighter-rouge"><span class="no">Chargen</span><span class="p">.</span><span class="nf">format_review_status</span></code> to create a line in the app review screen like:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">36</span> <span class="n">attribute</span> <span class="n">points</span> <span class="n">spent</span><span class="o">.</span> <span class="p">(</span><span class="mi">40</span> <span class="n">max</span><span class="p">)</span>                    <span class="o">&lt;</span> <span class="no">OK</span><span class="o">!</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>It will use either ‘OK’ or ‘Too Many’ depending on how many points were spent.  The Chargen helper has several built-in status values:</p>

<p><strong>Green (OK)</strong></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span><span class="p">(</span><span class="s1">'chargen.ok'</span><span class="p">)</span>  <span class="o">--&gt;</span> <span class="o">&lt;</span> <span class="no">OK</span><span class="o">!</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p><strong>Yellow (Warnings)</strong></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span><span class="p">(</span><span class="s1">'chargen.missing'</span><span class="p">)</span>       <span class="o">&lt;</span> <span class="no">Missing</span> <span class="sx">%{missing}</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p><strong>Red (Errors)</strong></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span><span class="p">(</span><span class="s1">'chargen.too_many'</span><span class="p">)</span>      <span class="o">&lt;</span> <span class="no">Too</span> <span class="no">Many</span><span class="o">!</span> <span class="o">&gt;</span>
<span class="n">t</span><span class="p">(</span><span class="s1">'chargen.not_enough'</span><span class="p">)</span>    <span class="o">&lt;</span> <span class="no">Not</span> <span class="no">Enough</span><span class="o">!</span> <span class="o">&gt;</span>
<span class="n">t</span><span class="p">(</span><span class="s1">'chargen.not_set'</span><span class="p">)</span>       <span class="o">&lt;</span> <span class="no">Not</span> <span class="n">set!</span> <span class="o">&gt;</span>
<span class="n">t</span><span class="p">(</span><span class="s1">'chargen.oops_missing'</span><span class="p">)</span>  <span class="o">&lt;</span> <span class="no">Oops</span><span class="o">!</span> <span class="no">Missing</span> <span class="sx">%{missing}</span> <span class="o">&gt;</span>
</code></pre></div></div>

<p>You are not limited to these, of course, but using the standard that people are familiar with will help players to understand your system.</p>


                 <div class="tutorial-nav">
                     <p>This article is part of the <a href="/tutorials/code/create-plugin">Creating a Plugin</a> tutorial.</p>
    
                     <div class="pagination-block">
                         <ul>
                             
                             <li><a href="/tutorials/code/create-plugin/sheet-cmd.html"> &larr; Previous</a></li>
                             
            
                             <li><a href="/tutorials/code/create-plugin">Back to Start</a> </li>
            
        
                             
                             <li><a href="/tutorials/code/create-plugin/roll-cmd.html">Next &rarr; </a></li>
                             
                         </ul>
                     </div>
    
                     <br/>
                 </div>
                 
             </div>             
                           </div>
              
              
                  <div class="col col-sm-3">
                      
                      
                      <a name="toc"></a>
                      <div class="sidebar fs3-sidebar"> 
                      
                        <div id="search-box">
  <!-- SearchBox widget will appear here -->
</div>
                      
                      <h2>Creating a Plugin</h2>
                      
                     
                      
                                          
                      
                                          
                      
                                          
                      
                                          
                      
                                          
                                          <ul>
  <li><a href="/tutorials/code/create-plugin/">Tutorial Overview</a></li>
  <li><a href="/tutorials/code/create-plugin/plugin-folder.html">Create a Plugin Folder</a></li>
  <li><a href="/tutorials/code/create-plugin/plugin-module.html">Create a Plugin Module</a></li>
  <li><a href="/tutorials/code/create-plugin/config-file.html">Create a Config File</a></li>
  <li><a href="/tutorials/code/create-plugin/help-file.html">Create a Help File</a></li>
  <li><a href="/tutorials/code/create-plugin/db-model.html">Create a Database Model</a></li>
  <li><a href="/tutorials/code/create-plugin/abilities-cmd.html">Create the Abilities Command</a></li>
  <li><a href="/tutorials/code/create-plugin/set-ability-cmd.html">Create the Set Ability Command</a></li>
  <li><a href="/tutorials/code/create-plugin/sheet-cmd.html">Create the Sheet Command</a></li>
  <li><a href="/tutorials/code/create-plugin/app-review-cmd.html">Expand the App Review Command</a></li>
  <li><a href="/tutorials/code/create-plugin/roll-cmd.html">Create the Roll Command</a></li>
  <li><a href="/tutorials/code/create-plugin/locale-file.html">Create a Translations File</a></li>
  <li><a href="/tutorials/code/create-plugin/cmd-dispatch.html">Create a Dispatch Link</a></li>
  <li><a href="/tutorials/code/create-plugin/next-steps.html">Next Steps</a></li>
</ul>

                                          
                      
                                          
                      
                  </div>
              </div>

              <div id="searchModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Search Results</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
       

       <div id="search-hits">
         <!-- Hits widget will appear here -->
       </div>


       <div id="search-pagination">
         <!-- Pagination widget will appear here -->
       </div>
       
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<script src="/scripts/search.js"></script>
<script>
  initializeSearch( 'NI38C577BA',
    '29793fd9084a3446072c14e471e32589',
    'aresmush.com',
    ' ' );
</script>
              
</div>


                          
              </div>
              
          </div>
          

          <div class="footer">
             <p> &copy;  2013 with help from the <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a> blog engine.
              </p>
          </div>
          
      
     
  </body>
</html>
