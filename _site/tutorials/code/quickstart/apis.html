<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="twitter:card" content="summary">

<!-- Schema.org markup for Google+ -->
<!-- Twitter Card data -->
<!-- Open Graph data -->

    <meta name="google-site-verification" content="GK5cKdKe-CQEFsGx1pPxHFhflO88ddWG8NdWk_KDabA" />
    
    <title>Common APIs - </title>
    <meta property="og:title" content="Common APIs - ">
    <meta name="twitter:title" content="Common APIs - ">
    <meta itemprop="name" content="Common APIs - ">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="">
    <meta property="og:site_name" content="Common APIs" >
    <meta property="og:url" content="/tutorials/code/quickstart/apis.html" >
    
  
    <meta name="description" content=" ...">
    <meta property="og:description" content=" ..." >
    <meta name="twitter:description" content=" ...">  
    <meta itemprop="description" content=" ...">
  
    
  
    <meta property="og:image" content="/default_preview.png">
    <meta name="twitter:image" content="/default_preview.png">
    <meta itemprop="image" content="/default_preview.png">
  
  
  <meta name="twitter:site" content="@lynnnoton">
  <meta name="twitter:creator" content="@lynnnoton">

  
    <!-- 
    
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    
    -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://use.fontawesome.com/ee2438614b.js"></script>
       
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css" defer="defer"></script>


    <script>
        (function() {
          var cx = '006109472892303620439:hmwpm8s4lvi';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
    </script>
      
    <script src="/scripts/default.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css">
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css">


    <link rel="stylesheet" type="text/css" href="/css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/tables.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/prettify.css"></link>
    
    
      <link rel="shortcut icon" href="/images/favicon.ico">
      <link rel="apple-touch-icon" href="/images/touchicon_57.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/images/touchicon_62.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/images/touchicon_114.png">
      
      
  </head>

  <body>

      <a name="top"></a>     
         
         
                               
                      <div class="titlebox">
                                                    
                         <div class="blogtitle">
                          
                              <a href="">AresMUSH</a> 
                              
                          </div>
                          
                          <div class="tagline">
                                A New Breed of MUSH Server            
                            </div>
                            
                            </div>
                             
                      
                            <nav class="navbar navbar-dark">
 
    <ul class="nav navbar-nav">
      <li class="active">
        <a href="/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Features <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/features/">Why Ares?</a></li>
          <li><a href="/features/ares-for-players.html">Ares for Players</a></li>
          <li><a href="/features/ares-for-admins.html">Ares for Admins</a></li>
          <li><a href="/features/ares-for-coders.html">Ares for Coders</a></li>
          <li><hr/></li>
          <li><a href="/web-portal">The Web Portal</a></li>
          <li><a href="/features/skills.html">Skills Systems</a></li>
          <li><a href="/handles">Player Handles</a></li>
          <li><a href="/features/server-roundup.html">Server Comparison</a></li>
        </ul>
      </li>  
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/mush-101">MUSH 101</a></li>
          <li><a href="/tutorials/play">Playing Ares</a></li>
          <li><a href="/tutorials/install">Installing Ares</a></li>
          <li><a href="/tutorials/config">Configuring Ares</a></li>
          <li><a href="/tutorials/manage">Managing Ares</a></li>
          <li><a href="/tutorials/code">Coding for Ares</a></li>
        </ul>
      </li>    
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">FS3 <span class="caret"></span></a>

        <ul class="dropdown-menu">
          <li><a href="/fs3/">FS3 Home</a></li>
          <li><a href="/fs3/fs3-3/">Player's Guide</a></li>
          <li><a href="/fs3/fs3-3/roll-quickref.html">Skills Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-quickref.html">Combat Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-walkthrough.html">Interactive Combat Walkthrough</a></li>
          <li><a href="/fs3/old-editions.html">Prior Edition Guides</a></li>
        </ul>
      </li>
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Code <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/code/">Source Code</a></li>
          <li><a href="/tutorials/code">Learn to Code</a></li>
          <li><a href="https://github.com/AresMUSH/aresmush/releases">Release Notes <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>
      
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
        
        <ul class="dropdown-menu">
          <li><a href="http://arescentral.aresmush.com">AresCentral Directory <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://forum.aresmush.com">Discussion Forum <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://logcleaner.aresmush.com/">RP Log Cleaner <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>

      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/feedback.html">Contact Us</a>
          <li><a href="/license.html">License</a>
          <li><a href="/privacy.html">Privacy Policy</a>
        </ul>
      </li>

    </ul>
</nav>

                      
                        
         
         <div class="page-block">
         
                           <div class="row">
                         
                         
    <div class="col col-sm-9">   

                               
             <div class="page">
                 
                 <h1>Common APIs</h1>
                 
                 <div class="fs3-shortcut">
                     <a href="#toc">(View Table of Contents)</a>
                 </div>
                 

                     <p>An API (Application Program Interface) is a well-defined way for one piece of code to talk to another piece of code.  Ares plugins provide APIs that let other plugins interact with them, and you can use these APIs in your own code.</p>

<p>Plugin APIs are always found in the file <code class="language-ruby highlighter-rouge"><span class="n">plugins</span><span class="o">/&lt;</span><span class="n">plugin</span><span class="o">&gt;</span><span class="sr">/public/</span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">&gt;</span><span class="n">_api</span><span class="p">.</span><span class="nf">rb</span></code>.  If you look in that file, you’ll see what API methods that plugin provides. For example, in the <code class="language-ruby highlighter-rouge"><span class="n">jobs_api</span><span class="p">.</span><span class="nf">rb</span></code> file, you’ll find API methods for:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Jobs</span><span class="p">.</span><span class="nf">create_job</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">author</span><span class="p">)</span>
<span class="no">Jobs</span><span class="p">.</span><span class="nf">close_job</span><span class="p">(</span><span class="n">enactor</span><span class="p">,</span> <span class="n">job</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
<span class="n">etc</span><span class="o">.</span>
</code></pre></div></div>

<p>You’ll find these APIs used throughout the Ares codebase.  The channel plugin creates a job when someone reports channel abuse.  The idle plugin creates a job when it’s time to do the idle purge.  The chargen plugin creates a job when someone submits their app.  And so on.</p>

<blockquote>
  <p><i class="fa fa-info-circle"></i> <strong>Tip:</strong> APIs generally expect that permissions will be checked by the calling command handler.</p>
</blockquote>

<h2 id="common-apis">Common APIs</h2>

<p>Here are a few of the most common APIs you’ll use:</p>

<h3 id="create-a-job">Create a Job</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Jobs</span><span class="p">.</span><span class="nf">create_job</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">author</span><span class="p">)</span>
</code></pre></div></div>

<p>There are some APIs like <code class="language-ruby highlighter-rouge"><span class="no">Jobs</span><span class="p">.</span><span class="nf">request_category</span></code> to find the right category to use.
You can use <code class="language-ruby highlighter-rouge"><span class="no">Game</span><span class="p">.</span><span class="nf">master</span><span class="p">.</span><span class="nf">system_character</span></code> to make the author “System” instead of a specific character.</p>

<h3 id="send-mail">Send Mail</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Mail</span><span class="p">.</span><span class="nf">send_mail</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">author</span><span class="p">)</span>
</code></pre></div></div>

<p>Use an array for <code class="language-ruby highlighter-rouge"><span class="n">names</span></code> even if there’s only one name, e.g. <code class="language-ruby highlighter-rouge"><span class="p">[</span> <span class="s2">"Faraday"</span> <span class="p">]</span></code>.
You can use <code class="language-ruby highlighter-rouge"><span class="no">Game</span><span class="p">.</span><span class="nf">master</span><span class="p">.</span><span class="nf">system_character</span></code> to make the author “System” instead of a specific character.
Leave ‘client’ nil when sending automated messages.</p>

<h3 id="move-a-character">Move a Character</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rooms</span><span class="p">.</span><span class="nf">move_to</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span> <span class="n">room</span><span class="p">,</span> <span class="n">exit_name</span><span class="p">)</span>
</code></pre></div></div>

<p>You can leave <code class="language-ruby highlighter-rouge"><span class="n">client</span></code> nil if the character isn’t logged in.
You can leave <code class="language-ruby highlighter-rouge"><span class="n">exit_name</span></code> nil if they aren’t moving through an exit.</p>

<h3 id="emitting-based-on-character">Emitting Based on Character</h3>

<p>Emits go to <em>clients</em>, not characters, but sometimes you need to find the client associated with a character.  For example, if Harvey attacks Bob, you’ll want to send an emit to Bob’s client.  These login APIs help you do that.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Login</span><span class="p">.</span><span class="nf">find_client</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
<span class="no">Login</span><span class="p">.</span><span class="nf">emit_if_logged_in</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
<span class="no">Login</span><span class="p">.</span><span class="nf">emit_ooc_if_logged_in</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="post-to-the-forum">Post to the Forum</h3>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Forum</span><span class="p">.</span><span class="nf">system_post</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre></div></div>

<p>This creates a post from “System”.</p>

<h3 id="adding-to-scenes">Adding to Scenes</h3>

<p>If you have a system that impacts RP (like magic or combat), you might want messages from that system to show up in RP logs.  Note that this method does <em>not</em> notify anyone in the game, so you’ll also want to emit the message to the relevant people.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Scenes</span><span class="p">.</span><span class="nf">add_to_scene</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">pose</span><span class="p">,</span> <span class="n">character</span><span class="p">,</span> <span class="n">is_setpose</span><span class="p">,</span> <span class="n">is_ooc</span><span class="p">)</span>
</code></pre></div></div>



                 <div class="tutorial-nav">
                     <p>This article is part of the <a href="/tutorials/code/quickstart">Code Quickstart</a> tutorial.</p>
    
                     <div class="pagination-block">
                         <ul>
                             
                             <li><a href="/tutorials/code/quickstart/db-intro.html"> &larr; Previous</a></li>
                             
            
                             <li><a href="/tutorials/code/quickstart">Back to Start</a> </li>
            
        
                             
                             <li><a href="/tutorials/code/quickstart/next-steps.html">Next &rarr; </a></li>
                             
                         </ul>
                     </div>
    
                     <br/>
                 </div>
                 
             </div>             
                           </div>
              
              
                  <div class="col col-sm-3">
                      
                      
                      <a name="toc"></a>
                      <div class="sidebar fs3-sidebar"> 
                      
                        <div id="search-box">
  <!-- SearchBox widget will appear here -->
</div>
                      
                      <h2>Code Quickstart</h2>
                      
                     
                      
                                          
                      
                                          
                      
                                          
                                          <ul>
  <li><a href="/tutorials/code/quickstart/">Tutorial Overview</a></li>
  <li><a href="/tutorials/code/quickstart/try-ruby.html">Try Ruby</a></li>
  <li><a href="/tutorials/code/quickstart/hello-mush.html">Hello MUSH</a></li>
  <li><a href="/tutorials/code/quickstart/tinker-intro.html">Tinkering</a></li>
  <li><a href="/tutorials/code/quickstart/command-handlers.html">Command Handlers</a></li>
  <li><a href="/tutorials/code/quickstart/emits.html">Emits</a></li>
  <li><a href="/tutorials/code/quickstart/templates-intro.html">Templates</a></li>
  <li><a href="/tutorials/code/quickstart/command-args.html">Command Switches and Args</a></li>
  <li><a href="/tutorials/code/quickstart/parsing-args.html">Parsing Args</a></li>
  <li><a href="/tutorials/code/quickstart/command-errors.html">Command Error Checking</a></li>
  <li><a href="/tutorials/code/quickstart/config-intro.html">Configuration</a></li>
  <li><a href="/tutorials/code/quickstart/localization-intro.html">Localization</a></li>
  <li><a href="/tutorials/code/quickstart/db-intro.html">Database Queries and Updates</a></li>
  <li><a href="/tutorials/code/quickstart/apis.html">Common APIs</a></li>
  <li><a href="/tutorials/code/quickstart/next-steps.html">Next Steps</a></li>
</ul>

                                          
                      
                                          
                      
                                          
                      
                                          
                      
                  </div>
              </div>

              <div id="searchModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Search Results</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
       

       <div id="search-hits">
         <!-- Hits widget will appear here -->
       </div>


       <div id="search-pagination">
         <!-- Pagination widget will appear here -->
       </div>
       
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<script src="/scripts/search.js"></script>
<script>
  initializeSearch( 'NI38C577BA',
    '29793fd9084a3446072c14e471e32589',
    'aresmush.com',
    ' ' );
</script>
              
</div>


                          
              </div>
              
          </div>
          

          <div class="footer">
             <p> &copy;  2013 with help from the <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a> blog engine.
              </p>
          </div>
          
      
     
  </body>
</html>
